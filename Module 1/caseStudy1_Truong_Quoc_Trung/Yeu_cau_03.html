<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YÊU CẦU 3</title>
</head>
<body>
        <script>
            let fullName;
            let numId ;
            let numBirth;
            let email;
            let address;
            let customerType;
            let numSale;
            let numMember;
            let numDay;
            let serviceType;
            let roomType;
            let check = false;
            let today = new Date();
            let currentYear = today.getFullYear();

            let tempFullName = "";
            fullName = prompt("01.Nhập Họ và Tên khách hàng:");
            fullName = fullName.trim().toLowerCase();
            for (let i =0; i<fullName.length;i++){
                if (fullName.charAt(i)=== " " && fullName.charAt(i+1) === " "){
                    continue;
                }   if (i === 0 || fullName.charAt(i-1) === " "){
                    tempFullName = fullName.charAt(i).toLowerCase();
                    continue;
                }
                tempFullName += fullName.charAt(i);
            }
            fullName = tempFullName;

            address = prompt("05.Địa chỉ khách hàng: ");

            do {
                numId = prompt("02.Nhập Số CMND hoặc Thẻ căng cước: ");
                if (!isNaN(numId)){
                    numId = Number.parseFloat(numId);
                }   if (!Number.isInteger(numId)){
                    alert("Yêu cầu nhập lại số CMND");
                    continue;
                }   if ((numId <100000000) || (numId > 999999999)){
                    alert("Yêu cầu nhập lại số CMND");
                    continue
                }   check = true;
            }   while (!check);
            check = false;

            do {
                numBirth = prompt("03.Nhập ngày tháng năm sinh Khách: " + "\n" + "Theo dạng 'MM/dd/yyyy' hoặc 'yyyy-MM-dd' hoặc 'dd/MM/yyyy'"  );
                if (numBirth.charAt(2)=== "/" && numBirth.charAt(5)==="/"){
                    let day = numBirth.substring(0,2);
                    let month = numBirth.substring(3,5);
                    let year = numBirth.substring(6,10);
                    if (!isNaN(day) && !isNaN(month) && !isNaN(year)){
                        day= Number.parseFloat(day);
                        month = Number.parseFloat(month);
                        year = Number.parseFloat(year);
                        if (Number.isInteger(day) && Number.isInteger(month) && Number.isInteger(year)){
                            if (day < 32 && month < 13 && year > 1800 && year < currentYear){
                                check = true;
                            }
                        }
                    }
                }   if (!check){
                    alert("Yêu cầu bạn nhập lại thông tin")
                }
            } while (!check);
            check =false;

            do {
                let countAt = 0;
                let countDoc = 0;
                email = prompt("04.Nhập địa chỉ Email: ");
                for (let i=0; i<email.length;i++){
                    if (email.charAt(i) =="@"){
                        countAt++;
                        for (let j =0; j<email.length;i++){
                            if (email.charAt(j)==="."){
                                countDoc++;
                            }
                        }
                    }
                }   if (countAt!=1 ||countDoc<1){
                    alert("Yêu cầu bạn nhập lại đại chỉ Email.");
                }   else {
                    check = true;
                }
            }   while (!check);
                check = false;

            do {
                customerType = prompt("06.Nhập Cấp độ khách hàng" +"\n" + "Diamond, Platinum, Gold, Silver, Member");
                if ((customerType === Diamond) || (customerType === Platinum) || (customerType === Gold) || (customerType === Silver) || (customerType === Member)){
                    check = true;
                }   if (!check){
                    alert("Yêu cầu bạn nhập lại thông tin.")
                }
            } while (!check);
            check = false;

            do {
                numSale = prompt("07.Phần trăm chiết khấu: ");
                if (!isNaN(numSale)){
                    numSale = Number.parseInt(numSale);
                    if ((Number.isInteger(numSale)) && (numSale>0)){
                        check = true;
                    }
                }   if (!check){
                    alert("Yêu cầu bạn nhập lại thông tin.")
                }
            } while (!check);
            check =false;

            do {
                numMember = prompt("08.Số lượng khách hàng: ");
                if (!isNaN(numMember)){
                    numMember = Number.parseInt(numMember);
                    if ((Number.isInteger(numMember)) && (numMember>0)){
                        check = true;
                    }
                }   if (!check){
                    alert("Yêu cầu bạn nhập lại thông tin.")
                }
            } while (!check);
            check = false;


            do {
                numDay = prompt("09.Số ngày thuê: ");
                if (!isNaN(numDay)){
                    numDay = Number.parseInt(numDay);
                    if ((Number.isInteger(numDay)) && (numDay >0)){
                        check = true;
                    }
                }   if (!check){
                    alert("Yêu cầu bạn nhập lại thông tin.")
                }
            } while (!check);
            check = false;

            do {
                serviceType = prompt("10.Loại hình dịch vụ" + "\n"+ "Villa, House, Room");
                if ((serviceType === Villa) || (serviceType ===  House) || (serviceType === Room)){
                    check = true;
                }   if (!check){
                    alert("Yêu cầu bạn nhập lại thông tin.")
                }
            } while (!check);
            check = false;

            do {
                roomType = prompt("11.Loại phòng khách cần thuê" + "\n" + "Vip, Business, Normal");
                if ((roomType === Vip) || (roomType === Business) || (roomType === Normal)){
                    check = true;
                }   if (!check){
                    alert("Yêu cầu bạn nhập lại thông tin.")
                }
            } while (!check);
            check = false;


        </script>
</body>
</html>