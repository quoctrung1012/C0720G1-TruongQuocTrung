<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TIC TAC TOE</title>
</head>

<body>
        <p id="Display"></p>
        <script>
            let table = parseInt(prompt("Nhập số ô muốn chơi."))
            let mangBang= new Array(table);
            for (let i=0;i<mangBang.length;i++){
                mangBang[i]=new Array(table);
                for (let j=0;j<mangBang[i].length;j++){
                    mangBang[i][j]=""
                }
            }
            let checkGamer = true;
            Display();

            function Display(){
                let chuoiBang ='<table border="1">';
                for (let i = 0; i < mangBang.length-2; i++){
                    chuoiBang += '<tr>';
                    for (let j = 0; j < mangBang[i].length-2; j++){
                        chuoiBang +='<th height="20" width="20" onclick="playGame('+i+','+j+')">'+ mangBang[i][j]+'</th>'
                    }
                    chuoiBang +='</tr>';
                }
                document.getElementById("Display").innerHTML= chuoiBang;
            }
            function playGame(i,j) {
                if (checkGamer && checkTable(i,j)){
                    mangBang[i][j]= "X";
                    checkGamer = false;
                    if (checkWinner()){
                        alert("Number play X winner");
                    }
                }else if (!checkGamer && checkTable(i,j)){
                    mangBang[i][j] = "O";
                    checkGamer = true;
                    if (checkWinner()){
                        alert("Number play O winner");
                    }
                }
                Display();
            }
            function checkTable(i,j) {
                if ( mangBang[i][j]!==""){
                    alert("Bạn nên chọn ô khác.");
                    return false
                }else {
                    return true;
                }
            }
            function checkWinner() {
                for (let i=0;i< mangBang.length;i++){
                    for (let j=0;j< mangBang[i].length;j++){
                        if ( mangBang[i][j] === "X"){
                            if ( mangBang[i][j] === "X"&& mangBang[i][j+1] === "X"&& mangBang[i][j+2] === "X"){
                                return true;
                            }
                            if ( mangBang[i][j] === "X"&& mangBang[i+1][j] === "X"&& mangBang[i+2][j] === "X"){
                                return true;
                            }
                            if ( mangBang[i][j] === "X"&& mangBang[i+1][j+1] === "X"&& mangBang[i+2][j+2] === "X"){
                                return true;
                            }
                            if ( mangBang[i][j] === "X"&& mangBang[i-1][j+1] === "X"&& mangBang[i-2][j+2] === "X"){
                                return true;
                            }
                        }else {
                            if ( mangBang[i][j] === "O"&& mangBang[i][j+1] === "O"&& mangBang[i][j+2] === "O"){
                                return true;
                            }
                            if ( mangBang[i][j] === "O"&& mangBang[i+1][j] === "O"&& mangBang[i+2][j] === "O"){
                                return true;
                            }
                            if ( mangBang[i][j] === "O"&& mangBang[i+1][j+1] === "O"&& mangBang[i+2][j+2] === "O"){
                                return true;
                            }
                            if ( mangBang[i][j] === "O"&& mangBang[i-1][j+1] === "O"&& mangBang[i-2][j+2] === "O"){
                                return true;
                            }
                        }
                    }
                }
            }
        </script>
</body>
</html>